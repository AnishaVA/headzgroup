<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Sign up</title>
		<link rel="stylesheet" href="css/login.css">
		<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	</head>
	<body>
		<section class="ftco-section">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-md-12 col-lg-10">
						<div class="wrap d-md-flex">
							<div class="img" style="background-image: url(/images/login.jpg);">
					</div>
							<div class="login-wrap p-4 p-md-5">
						<div class="d-flex">
							<div class="w-100">
								<h3 class="mb-4">Sign Up</h3>
							</div>
						</div>
						
						<div class="modal-body">
							<form id="registerForm" action="index.html" method="post" data-netlify="true" data-netlify-honeypot="bot-field" class="responsive-form">
                                <input type="hidden" name="form-name" value="details" />>
								<div class="alert">Successfully Sent!</div>
								<div class="form-group">
									<label for="role">Select your role</label>
									<select class="form-control" id="role" required>
										<option value="" disabled selected>Select your role</option>
										<option value="employer">Employer</option>
										<option value="jobSeeker">Job Seeker</option>
									</select>
								</div>
				
								<div class="form-group">
									<label for="fullName">Full Name</label>
									<input type="text" class="form-control" id="fullName" placeholder="Enter your full name" required>
								</div>
				
								<div class="form-group">
									<label for="mobile">Contact Number</label>
									<input type="tel" class="form-control" id="mobile" placeholder="Enter your number" required>
								</div>
				
								<div class="form-group">
									<label for="email">Email address</label>
									<input type="email" class="form-control" id="email" placeholder="Enter your email" required>
								</div>
				
								<div class="form-group">
									<label for="password">Password</label>
									<input type="password" class="form-control" id="password" placeholder="Enter your password" required>
								</div>
				
								<!-- Additional Fields based on Role -->
								<div id="employerFields" class="form-group" style="display: none;">
									<label for="companyName">Company Name</label>
									<input type="text" class="form-control" id="companyName" placeholder="Enter your company name">
								</div>
				
								<div id="employerFieldsAddress" class="form-group" style="display: none;">
									<label for="companyAddress">Company Address</label>
									<input type="text" class="form-control" id="companyAddress" placeholder="Enter your company address">
								</div>
				
								<div id="employerFieldsReq" class="form-group" style="display: none;">
									<label for="requirements">Requirements</label>
									<input type="text" class="form-control" id="requirements" placeholder="Enter your requirements">
								</div>
				
								<div id="jobSeekerFields" class="form-group" style="display: none;">
									<label for="dob">Date of Birth</label>
									<input type="date" class="form-control" id="dob">
								</div>
				
								
								<div id="jobSeekerFieldsEdu" class="form-group" style="display: none;">
									<label for="education">Education</label>
									<select id="education" name="education" required>
										
										<option value="highSchool">High School</option>
										<option value="diploma">Diploma</option>
										<option value="bachelors">Bachelors</option>
										<option value="masters">Masters</option>
										<option value="above">Above</option>
									</select>
								</div>
							
								<div id="jobSeekerFieldsResume" class="form-group" style="display: none;">
									<label for="resume">Upload Resume</label>
									<input type="file" class="form-control-file" id="resume">
									<small class="form-text text-muted">Upload your resume (PDF or Word format).</small>
								</div>
							
					
					</div> 
					<div class="modal-footer">
						<a href="index.html">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></a>
						<button type="submit" form="registerForm" class="btn btn-primary">Register</button>
					</div>
					<!-- <div id="message" class="mt-3"></div> -->
				</form>
			</div>
				</div>
				</div>
			</div>
			</div>
		</section>


		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<!-- <script src="js/mail.js"></script> -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
		<script>
			// Show/hide additional fields based on the selected role
			document.getElementById('role').addEventListener('change', function() {
				var role = this.value;
	
				// Hide all additional fields
				document.getElementById('employerFields').style.display = 'none';
				document.getElementById('employerFieldsAddress').style.display = 'none';
				document.getElementById('employerFieldsReq').style.display = 'none';
				document.getElementById('jobSeekerFields').style.display = 'none';
				document.getElementById('jobSeekerFieldsEdu').style.display = 'none';
				document.getElementById('jobSeekerFieldsResume').style.display = 'none';
	
				// Show additional fields based on the selected role
				if (role === 'employer') {
					document.getElementById('employerFields').style.display = 'block';
					document.getElementById('employerFieldsAddress').style.display = 'block';
					document.getElementById('employerFieldsReq').style.display = 'block';
				} else if (role === 'jobSeeker') {
					document.getElementById('jobSeekerFields').style.display = 'block';             
					document.getElementById('jobSeekerFieldsEdu').style.display = 'block';
					document.getElementById('jobSeekerFieldsResume').style.display = 'block';
				}
			});
		
			// 	function submitForm() {
			// 	// You can add your form submission logic here using Firebase or other methods
	
			// 	// For now, let's just display a thank you message
			// 	var messageElement = document.getElementById('message');
			// 	messageElement.innerHTML = '<div class="alert alert-success" role="alert">Thank you for registering!</div>';
	
			// 	// Optional: You can reset the form after submission
			// 	document.getElementById('registerForm').reset();
			// }
		</script>
		 <script type="module">
			import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js'
		
			// If you enabled Analytics in your project, add the Firebase SDK for Google Analytics
			import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.2/firebase-analytics.js'

			const firebaseConfig = {
				apiKey: "AIzaSyDyjJto2CXYHXDbi9imSQQ_DTssBJ4jIMw",
				authDomain: "headzgroup-2857d.firebaseapp.com",
				databaseURL: "https://headzgroup-2857d-default-rtdb.firebaseio.com",
				projectId: "headzgroup-2857d",
				storageBucket: "headzgroup-2857d.appspot.com",
				messagingSenderId: "237135669705",
				appId: "1:237135669705:web:ac3f0d2e59da018596e018"
    		};
			firebase.initializeApp(firebaseConfig);
			var registerDB = firebase.database().ref('registerForm');

			document.getElementById("registerForm").addEventListener("submit",submitForm);

			function submitForm(e){
				e.preventDefault();    
				
				var fullName = getElementVal('fullName');
				var mobile= getElementVal('mobile');
				var email = getElementVal('email');
				var password = getElementVal('password');
				var companyName = getElementVal('companyName');
				var companyAddress = getElementVal('companyAddress');
				var requirements = getElementVal('requirements');
				var dob = getElementVal('dob');
				var education = getElementVal('education');
				var resume = getElementVal('resume');
			
			console.log(fullName,mobile,email,password,companyName,companyAddress,requirements,dob,education,resume);

			saveMessages(fullName,mobile,email,password,companyName,companyAddress,requirements,dob,education,resume); 
			//alert
			document.querySelector('.alert').style.diplay = 'block';

			//remove alert
			setTimeout(()=>{
				document.querySelector('.alert').style.display='none';
			},3000);

			//reset form

			document.getElementById("registerForm").reset();

			}

			const saveMessages = (fullName,mobile,email,password,companyName,companyAddress,requirements,dob,education,resume) => {
			var newregisterForm = registerDB.push();

			newregisterForm.set({
				fullName: fullName,
				mobile: mobile,
				email: email,
				password: password,
				companyName : companyName ,
				companyAddress : companyAddress,
				requirements: requirements,
				dob: dob,
				education: education,
				resume: resume,
			});
			};

			const getElementVal = (id) => {
				return  document.getElementById(id).value;
			}

			</script>
			<script>
				document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('form[id="registerForm"]');
  
    form.addEventListener('submit', function (event) {
      event.preventDefault();
  
      // Submit the form data using Fetch API
      fetch('/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: new URLSearchParams(new FormData(form)).toString(),
      })
        .then((response) => {
          // Handle successful submission
          console.log('Form submitted successfully:', response);
          // You can redirect the user or show a success message here
        })
        .catch((error) => {
          // Handle submission error
          console.error('Form submission error:', error);
          // You can show an error message to the user here
        });
    });
  });
			</script>
		</body>
</html>